import{_ as t,a as n,b as s,c as e,i as o,d as a,S as i,s as r,U as c,e as f,t as u,f as l,p as d,g as h,h as m,j as p,l as v,k as y,q as g,r as $,m as b,n as k,w,y as I,B as j,P as D,A as E,D as C,F as H,G as x,O as P,Q as R,V as T,J as V,o as M}from"./client.f90066e1.js";import{L as B}from"./Loader.6bd86084.js";import{P as G,n as O}from"./instrument.12e4d52c.js";import{b as S,n as K}from"./notes.be99bc8d.js";import{s as L,i as N}from"./storage.4617e2a9.js";import"./webmidi.min.13b0c62b.js";function q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,a=n(t);if(e){var i=n(this).constructor;o=Reflect.construct(a,arguments,i)}else o=a.apply(this,arguments);return s(this,o)}}function A(t){var n,s,e,o,a;return{c:function(){n=f("div"),s=f("h3"),e=u("Setup complete"),o=l(),a=f("img"),this.h()},l:function(t){n=h(t,"DIV",{class:!0});var i=m(n);s=h(i,"H3",{});var r=m(s);e=p(r,"Setup complete"),r.forEach(v),o=y(i),a=h(i,"IMG",{src:!0,alt:!0}),i.forEach(v),this.h()},h:function(){a.src!=="/Tick.png"&&$(a,"src","/Tick.png"),$(a,"alt","tick"),$(n,"class","titleHolder svelte-18khiw")},m:function(t,i){b(t,n,i),k(n,s),k(s,e),k(n,o),k(n,a)},i:M,o:M,d:function(t){t&&v(n)}}}function F(t){var n,s,e,o,a,i;return a=new B({props:{text:"Waiting for middle C"}}),{c:function(){n=f("div"),s=f("h3"),e=u("Play middle C on your MIDI keyboard to test the connection"),o=l(),d(a.$$.fragment),this.h()},l:function(t){n=h(t,"DIV",{class:!0});var i=m(n);s=h(i,"H3",{});var r=m(s);e=p(r,"Play middle C on your MIDI keyboard to test the connection"),r.forEach(v),o=y(i),g(a.$$.fragment,i),i.forEach(v),this.h()},h:function(){$(n,"class","titleHolder svelte-18khiw")},m:function(t,r){b(t,n,r),k(n,s),k(s,e),k(n,o),w(a,n,null),i=!0},i:function(t){i||(E(a.$$.fragment,t),i=!0)},o:function(t){j(a.$$.fragment,t),i=!1},d:function(t){t&&v(n),C(a)}}}function J(t){var n,s,e,o,a,i,r,H,x,P,T=[F,A],V=[];function M(t,n){return t[1]?1:0}return a=M(t),i=V[a]=T[a](t),(x=new G({props:{lessonNotes:new Map([[S("C",4),"expecting"]]),keys:K(S("G",3),S("C",5)),instrument:t[0],sandbox:!0,midiOnly:!0}})).$on("playingNotes",(function(){c(t[2])&&t[2].apply(this,arguments)})),{c:function(){n=f("div"),s=f("h2"),e=u("Test Keyboard"),o=l(),i.c(),r=l(),H=f("div"),d(x.$$.fragment),this.h()},l:function(t){n=h(t,"DIV",{class:!0});var a=m(n);s=h(a,"H2",{});var c=m(s);e=p(c,"Test Keyboard"),c.forEach(v),o=y(a),i.l(a),r=y(a),H=h(a,"DIV",{class:!0});var f=m(H);g(x.$$.fragment,f),f.forEach(v),a.forEach(v),this.h()},h:function(){$(H,"class","pianoHolder svelte-18khiw"),$(n,"class","vert svelte-18khiw")},m:function(t,i){b(t,n,i),k(n,s),k(s,e),k(n,o),V[a].m(n,null),k(n,r),k(n,H),w(x,H,null),P=!0},p:function(s,e){var o=I(e,1)[0],c=a;(a=M(t=s))!==c&&(R(),j(V[c],1,1,(function(){V[c]=null})),D(),(i=V[a])||(i=V[a]=T[a](t)).c(),E(i,1),i.m(n,r));var f={};1&o&&(f.instrument=t[0]),x.$set(f)},i:function(t){P||(E(i),E(x.$$.fragment,t),P=!0)},o:function(t){j(i),j(x.$$.fragment,t),P=!1},d:function(t){t&&v(n),V[a].d(),C(x)}}}function Q(t,n,s){var e,o=H().session;x((function(){s(0,e=O("tester",(function(){console.log("piano loaded")})))}));var a=!1,i=function(t){a||t.detail.includes(S("C",4))&&(s(1,a=!0),L(N.midi),setTimeout((function(){var t=T(o);t&&void 0!==t.redirect?(o.set({}),V(t.redirect)):V("/settings")}),500))};return P((function(){s(2,i=function(){})})),[e,a,i]}var U=function(n){t(c,i);var s=q(c);function c(t){var n;return e(this,c),n=s.call(this),o(a(n),t,Q,J,r,{}),n}return c}();export default U;
