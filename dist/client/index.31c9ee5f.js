import{S as e,i as t,s as a,e as l,t as s,a as n,c as r,b as o,d as h,f as c,g as i,h as f,j as u,n as v,k as p,l as m,m as g,o as E,p as d,q as I,r as y,u as x,v as M,w as N,x as T,y as $,z as b,A as D,B as P,C as _,D as j,E as S}from"./client.67bea87c.js";import{R as V}from"./ReccomendedButton.474406f8.js";import{a as H,N as L}from"./notes.be99bc8d.js";import{a as O,h as z,l as C}from"./level.c4173c69.js";import{g as U}from"./storage.4617e2a9.js";function k(e,t,a){const l=e.slice();return l[14]=t[a],l}function w(e,t,a){const l=e.slice();return l[17]=t[a],l}function R(e){let t,a,p,m=e[17].prettyString()+"";return{c(){t=l("option"),a=s(m),p=n(),this.h()},l(e){t=r(e,"OPTION",{value:!0});var l=o(t);a=h(l,m),p=c(l),l.forEach(i),this.h()},h(){t.__value=e[17],t.value=t.__value},m(e,l){f(e,t,l),u(t,a),u(t,p)},p:v,d(e){e&&i(t)}}}function q(e){let t,a,p,m=e[14]+"";return{c(){t=l("option"),a=s(m),p=n(),this.h()},l(e){t=r(e,"OPTION",{value:!0});var l=o(t);a=h(l,m),p=c(l),l.forEach(i),this.h()},h(){t.__value=e[14],t.value=t.__value},m(e,l){f(e,t,l),u(t,a),u(t,p)},p:v,d(e){e&&i(t)}}}function B(e){let t,a,v,D,P,j,S,L,z,C,U,B,K,Y,A,G,J,F,Q,W,X,Z,ee,te,ae,le,se,ne,re,oe,he,ce,ie,fe,ue,ve,pe=H(),me=[];for(let t=0;t<pe.length;t+=1)me[t]=R(w(e,pe,t));let ge=O(),Ee=[];for(let t=0;t<ge.length;t+=1)Ee[t]=q(k(e,ge,t));return ie=new V({props:{text:"Go"}}),ie.$on("click",e[12]),{c(){t=l("h2"),a=s("Train Your Ear"),v=n(),D=l("div"),P=l("div"),j=l("h3"),S=s("Key"),L=n(),z=l("div"),C=l("select");for(let e=0;e<me.length;e+=1)me[e].c();U=n(),B=l("select");for(let e=0;e<Ee.length;e+=1)Ee[e].c();K=n(),Y=l("div"),A=l("h3"),G=s("Phrase Length"),J=n(),F=l("input"),Q=n(),W=l("div"),X=l("h3"),Z=s("Note pool size"),ee=n(),te=l("input"),ae=n(),le=l("div"),se=l("h3"),ne=s("Max interval"),re=n(),oe=l("input"),he=n(),ce=l("div"),p(ie.$$.fragment),this.h()},l(e){t=r(e,"H2",{});var l=o(t);a=h(l,"Train Your Ear"),l.forEach(i),v=c(e),D=r(e,"DIV",{class:!0});var s=o(D);P=r(s,"DIV",{class:!0});var n=o(P);j=r(n,"H3",{});var f=o(j);S=h(f,"Key"),f.forEach(i),L=c(n),z=r(n,"DIV",{class:!0});var u=o(z);C=r(u,"SELECT",{});var p=o(C);for(let e=0;e<me.length;e+=1)me[e].l(p);p.forEach(i),U=c(u),B=r(u,"SELECT",{});var g=o(B);for(let e=0;e<Ee.length;e+=1)Ee[e].l(g);g.forEach(i),u.forEach(i),n.forEach(i),K=c(s),Y=r(s,"DIV",{class:!0});var E=o(Y);A=r(E,"H3",{});var d=o(A);G=h(d,"Phrase Length"),d.forEach(i),J=c(E),F=r(E,"INPUT",{type:!0,min:!0,step:!0}),E.forEach(i),Q=c(s),W=r(s,"DIV",{class:!0});var I=o(W);X=r(I,"H3",{});var y=o(X);Z=h(y,"Note pool size"),y.forEach(i),ee=c(I),te=r(I,"INPUT",{type:!0,min:!0,step:!0}),I.forEach(i),ae=c(s),le=r(s,"DIV",{class:!0});var x=o(le);se=r(x,"H3",{});var M=o(se);ne=h(M,"Max interval"),M.forEach(i),re=c(x),oe=r(x,"INPUT",{type:!0,min:!0,step:!0,max:!0}),x.forEach(i),he=c(s),ce=r(s,"DIV",{class:!0});var N=o(ce);m(ie.$$.fragment,N),N.forEach(i),s.forEach(i),this.h()},h(){void 0===e[0]&&_(()=>e[7].call(C)),void 0===e[1]&&_(()=>e[8].call(B)),g(z,"class","svelte-1ulh42n"),g(P,"class","svelte-1ulh42n"),g(F,"type","number"),g(F,"min","2"),g(F,"step","1"),g(Y,"class","svelte-1ulh42n"),g(te,"type","number"),g(te,"min","2"),g(te,"step","1"),g(W,"class","svelte-1ulh42n"),g(oe,"type","number"),g(oe,"min","2"),g(oe,"step","1"),g(oe,"max",e[3]),g(le,"class","svelte-1ulh42n"),g(ce,"class","btnHolder svelte-1ulh42n"),g(D,"class","svelte-1ulh42n")},m(l,s){f(l,t,s),u(t,a),f(l,v,s),f(l,D,s),u(D,P),u(P,j),u(j,S),u(P,L),u(P,z),u(z,C);for(let e=0;e<me.length;e+=1)me[e].m(C,null);E(C,e[0]),u(z,U),u(z,B);for(let e=0;e<Ee.length;e+=1)Ee[e].m(B,null);E(B,e[1]),u(D,K),u(D,Y),u(Y,A),u(A,G),u(Y,J),u(Y,F),d(F,e[2]),u(D,Q),u(D,W),u(W,X),u(X,Z),u(W,ee),u(W,te),d(te,e[3]),u(D,ae),u(D,le),u(le,se),u(se,ne),u(le,re),u(le,oe),d(oe,e[4]),u(D,he),u(D,ce),I(ie,ce,null),fe=!0,ue||(ve=[y(C,"change",e[7]),y(B,"change",e[8]),y(F,"input",e[9]),y(F,"change",e[6]),y(te,"input",e[10]),y(te,"change",e[6]),y(oe,"input",e[11]),y(oe,"change",e[6])],ue=!0)},p(e,[t]){if(0&t){let a;for(pe=H(),a=0;a<pe.length;a+=1){const l=w(e,pe,a);me[a]?me[a].p(l,t):(me[a]=R(l),me[a].c(),me[a].m(C,null))}for(;a<me.length;a+=1)me[a].d(1);me.length=pe.length}if(1&t&&E(C,e[0]),0&t){let a;for(ge=O(),a=0;a<ge.length;a+=1){const l=k(e,ge,a);Ee[a]?Ee[a].p(l,t):(Ee[a]=q(l),Ee[a].c(),Ee[a].m(B,null))}for(;a<Ee.length;a+=1)Ee[a].d(1);Ee.length=ge.length}2&t&&E(B,e[1]),4&t&&x(F.value)!==e[2]&&d(F,e[2]),8&t&&x(te.value)!==e[3]&&d(te,e[3]),(!fe||8&t)&&g(oe,"max",e[3]),16&t&&x(oe.value)!==e[4]&&d(oe,e[4])},i(e){fe||(M(ie.$$.fragment,e),fe=!0)},o(e){N(ie.$$.fragment,e),fe=!1},d(e){e&&i(t),e&&i(v),e&&i(D),T(me,e),T(Ee,e),$(ie),ue=!1,b(ve)}}}function K(e,t,a){const{session:l,page:s}=D();let n=L("C"),r="Major",o=4,h=2,c=2;P(()=>{let e=localStorage.getItem(z);if(e){let t=JSON.parse(e),l=t.levels[t.levels.length-1];a(0,n=L(l.key)),a(1,r=l.tonality),a(2,o=l.phraseLength),a(3,h=l.notePoolSize),a(4,c=l.maxInterval)}});return[n,r,o,h,c,l,function(){c>h&&a(4,c=h),o<2&&a(2,o=2),h<2&&a(3,h=2),c<2&&a(4,c=2),Math.floor(o)!==o&&a(2,o=Math.floor(o)),Math.floor(h)!==h&&a(3,h=Math.floor(h)),Math.floor(c)!==c&&a(4,c=Math.floor(c))},function(){n=j(this),a(0,n)},function(){r=j(this),a(1,r)},function(){o=x(this.value),a(2,o)},function(){h=x(this.value),a(3,h)},function(){c=x(this.value),a(4,c)},()=>{let e=new C(n.enharmonicEquivalent(),r,o,h,c).playURL();U()?S(e):(l.set({redirect:e}),S("/settings"))}]}export default class extends e{constructor(e){super(),t(this,e,K,B,a,{})}}
