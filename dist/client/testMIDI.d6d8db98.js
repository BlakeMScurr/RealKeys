import{S as s,i as e,s as t,M as a,e as o,t as r,a as n,k as i,c as l,b as c,d as m,g as d,f as h,l as f,m as p,h as u,j as g,q as v,w as $,K as y,v as b,y as k,A as j,B as w,J as I,L as E,N as H,E as C,n as D}from"./client.05ee8443.js";import{L as x}from"./Loader.28e4ac09.js";import{P as M,n as T}from"./instrument.6e502154.js";import{b as V,n as K}from"./notes.be99bc8d.js";import{s as L,i as N}from"./storage.4617e2a9.js";import"./webmidi.min.0a3878e3.js";import"./_commonjsHelpers.521bc219.js";function P(s){let e,t,a,i,f,v;return{c(){e=o("div"),t=o("h3"),a=r("Setup complete"),i=n(),f=o("img"),this.h()},l(s){e=l(s,"DIV",{class:!0});var o=c(e);t=l(o,"H3",{});var r=c(t);a=m(r,"Setup complete"),r.forEach(d),i=h(o),f=l(o,"IMG",{src:!0,alt:!0}),o.forEach(d),this.h()},h(){f.src!==(v="/Tick.png")&&p(f,"src","/Tick.png"),p(f,"alt","tick"),p(e,"class","titleHolder svelte-18khiw")},m(s,o){u(s,e,o),g(e,t),g(t,a),g(e,i),g(e,f)},i:D,o:D,d(s){s&&d(e)}}}function S(s){let e,t,a,y,j,w;return j=new x({props:{text:"Waiting for middle C"}}),{c(){e=o("div"),t=o("h3"),a=r("Play middle C on your MIDI keyboard to test the connection"),y=n(),i(j.$$.fragment),this.h()},l(s){e=l(s,"DIV",{class:!0});var o=c(e);t=l(o,"H3",{});var r=c(t);a=m(r,"Play middle C on your MIDI keyboard to test the connection"),r.forEach(d),y=h(o),f(j.$$.fragment,o),o.forEach(d),this.h()},h(){p(e,"class","titleHolder svelte-18khiw")},m(s,o){u(s,e,o),g(e,t),g(t,a),g(e,y),v(j,e,null),w=!0},i(s){w||(b(j.$$.fragment,s),w=!0)},o(s){$(j.$$.fragment,s),w=!1},d(s){s&&d(e),k(j)}}}function G(s){let e,t,j,w,I,H,C,D,x,T;const L=[S,P],N=[];function G(s,e){return s[1]?1:0}return I=G(s),H=N[I]=L[I](s),x=new M({props:{lessonNotes:new Map([[V("C",4),"expecting"]]),keys:K(V("G",3),V("C",5)),instrument:s[0],sandbox:!0,midiOnly:!0}}),x.$on("playingNotes",(function(){a(s[2])&&s[2].apply(this,arguments)})),{c(){e=o("div"),t=o("h2"),j=r("Test Keyboard"),w=n(),H.c(),C=n(),D=o("div"),i(x.$$.fragment),this.h()},l(s){e=l(s,"DIV",{class:!0});var a=c(e);t=l(a,"H2",{});var o=c(t);j=m(o,"Test Keyboard"),o.forEach(d),w=h(a),H.l(a),C=h(a),D=l(a,"DIV",{class:!0});var r=c(D);f(x.$$.fragment,r),r.forEach(d),a.forEach(d),this.h()},h(){p(D,"class","pianoHolder svelte-18khiw"),p(e,"class","vert svelte-18khiw")},m(s,a){u(s,e,a),g(e,t),g(t,j),g(e,w),N[I].m(e,null),g(e,C),g(e,D),v(x,D,null),T=!0},p(t,[a]){let o=I;I=G(s=t),I!==o&&(E(),$(N[o],1,1,()=>{N[o]=null}),y(),H=N[I],H||(H=N[I]=L[I](s),H.c()),b(H,1),H.m(e,C));const r={};1&a&&(r.instrument=s[0]),x.$set(r)},i(s){T||(b(H),b(x.$$.fragment,s),T=!0)},o(s){$(H),$(x.$$.fragment,s),T=!1},d(s){s&&d(e),N[I].d(),k(x)}}}function q(s,e,t){const{session:a}=j();let o;w(()=>{t(0,o=T("tester",()=>{console.log("piano loaded")}))});let r=!1,n=s=>{if(!r){s.detail.includes(V("C",4))&&(t(1,r=!0),L(N.midi),setTimeout(()=>{let s=H(a);s&&void 0!==s.redirect?(a.set({}),C(s.redirect)):C("/settings")},500))}};return I(()=>{t(2,n=()=>{})}),[o,r,n]}export default class extends s{constructor(s){super(),e(this,s,q,G,t,{})}}
