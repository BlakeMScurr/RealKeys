import{S as e,i as a,s as t,e as l,t as s,a as n,c as r,b as o,d as h,f as c,g as i,h as f,j as u,n as v,k as p,l as m,m as g,o as E,p as d,q as y,r as I,u as b,v as x,w as M,x as N,y as T,z as $,A as D,B as P,C as S,D as _,E as j}from"./client.05ee8443.js";import{R as V}from"./ReccomendedButton.e11b2fb1.js";import{a as H,N as L}from"./notes.be99bc8d.js";import{a as O,h as z,l as C}from"./level.c4173c69.js";import{g as R}from"./storage.4617e2a9.js";function U(e,a,t){const l=e.slice();return l[14]=a[t],l}function k(e,a,t){const l=e.slice();return l[17]=a[t],l}function w(e){let a,t,p,m=e[17].prettyString()+"";return{c(){a=l("option"),t=s(m),p=n(),this.h()},l(e){a=r(e,"OPTION",{value:!0});var l=o(a);t=h(l,m),p=c(l),l.forEach(i),this.h()},h(){a.__value=e[17],a.value=a.__value},m(e,l){f(e,a,l),u(a,t),u(a,p)},p:v,d(e){e&&i(a)}}}function B(e){let a,t,p,m=e[14]+"";return{c(){a=l("option"),t=s(m),p=n(),this.h()},l(e){a=r(e,"OPTION",{value:!0});var l=o(a);t=h(l,m),p=c(l),l.forEach(i),this.h()},h(){a.__value=e[14],a.value=a.__value},m(e,l){f(e,a,l),u(a,t),u(a,p)},p:v,d(e){e&&i(a)}}}function K(e){let a,t,v,D,P,_,j,L,z,C,R,K,q,A,Y,G,J,F,Q,W,X,Z,ee,ae,te,le,se,ne,re,oe,he,ce,ie,fe,ue,ve,pe,me,ge=H(),Ee=[];for(let a=0;a<ge.length;a+=1)Ee[a]=w(k(e,ge,a));let de=O(),ye=[];for(let a=0;a<de.length;a+=1)ye[a]=B(U(e,de,a));return ue=new V({props:{text:"Go"}}),ue.$on("click",e[12]),{c(){a=l("base"),t=n(),v=l("h2"),D=s("Train Your Ear"),P=n(),_=l("div"),j=l("div"),L=l("h3"),z=s("Key"),C=n(),R=l("div"),K=l("select");for(let e=0;e<Ee.length;e+=1)Ee[e].c();q=n(),A=l("select");for(let e=0;e<ye.length;e+=1)ye[e].c();Y=n(),G=l("div"),J=l("h3"),F=s("Phrase Length"),Q=n(),W=l("input"),X=n(),Z=l("div"),ee=l("h3"),ae=s("Note pool size"),te=n(),le=l("input"),se=n(),ne=l("div"),re=l("h3"),oe=s("Max interval"),he=n(),ce=l("input"),ie=n(),fe=l("div"),p(ue.$$.fragment),this.h()},l(e){a=r(e,"BASE",{href:!0}),t=c(e),v=r(e,"H2",{});var l=o(v);D=h(l,"Train Your Ear"),l.forEach(i),P=c(e),_=r(e,"DIV",{class:!0});var s=o(_);j=r(s,"DIV",{class:!0});var n=o(j);L=r(n,"H3",{});var f=o(L);z=h(f,"Key"),f.forEach(i),C=c(n),R=r(n,"DIV",{class:!0});var u=o(R);K=r(u,"SELECT",{});var p=o(K);for(let e=0;e<Ee.length;e+=1)Ee[e].l(p);p.forEach(i),q=c(u),A=r(u,"SELECT",{});var g=o(A);for(let e=0;e<ye.length;e+=1)ye[e].l(g);g.forEach(i),u.forEach(i),n.forEach(i),Y=c(s),G=r(s,"DIV",{class:!0});var E=o(G);J=r(E,"H3",{});var d=o(J);F=h(d,"Phrase Length"),d.forEach(i),Q=c(E),W=r(E,"INPUT",{type:!0,min:!0,step:!0}),E.forEach(i),X=c(s),Z=r(s,"DIV",{class:!0});var y=o(Z);ee=r(y,"H3",{});var I=o(ee);ae=h(I,"Note pool size"),I.forEach(i),te=c(y),le=r(y,"INPUT",{type:!0,min:!0,step:!0}),y.forEach(i),se=c(s),ne=r(s,"DIV",{class:!0});var b=o(ne);re=r(b,"H3",{});var x=o(re);oe=h(x,"Max interval"),x.forEach(i),he=c(b),ce=r(b,"INPUT",{type:!0,min:!0,step:!0,max:!0}),b.forEach(i),ie=c(s),fe=r(s,"DIV",{class:!0});var M=o(fe);m(ue.$$.fragment,M),M.forEach(i),s.forEach(i),this.h()},h(){g(a,"href","/RealKeys"),void 0===e[0]&&S(()=>e[7].call(K)),void 0===e[1]&&S(()=>e[8].call(A)),g(R,"class","svelte-1ulh42n"),g(j,"class","svelte-1ulh42n"),g(W,"type","number"),g(W,"min","2"),g(W,"step","1"),g(G,"class","svelte-1ulh42n"),g(le,"type","number"),g(le,"min","2"),g(le,"step","1"),g(Z,"class","svelte-1ulh42n"),g(ce,"type","number"),g(ce,"min","2"),g(ce,"step","1"),g(ce,"max",e[3]),g(ne,"class","svelte-1ulh42n"),g(fe,"class","btnHolder svelte-1ulh42n"),g(_,"class","svelte-1ulh42n")},m(l,s){f(l,a,s),f(l,t,s),f(l,v,s),u(v,D),f(l,P,s),f(l,_,s),u(_,j),u(j,L),u(L,z),u(j,C),u(j,R),u(R,K);for(let e=0;e<Ee.length;e+=1)Ee[e].m(K,null);E(K,e[0]),u(R,q),u(R,A);for(let e=0;e<ye.length;e+=1)ye[e].m(A,null);E(A,e[1]),u(_,Y),u(_,G),u(G,J),u(J,F),u(G,Q),u(G,W),d(W,e[2]),u(_,X),u(_,Z),u(Z,ee),u(ee,ae),u(Z,te),u(Z,le),d(le,e[3]),u(_,se),u(_,ne),u(ne,re),u(re,oe),u(ne,he),u(ne,ce),d(ce,e[4]),u(_,ie),u(_,fe),y(ue,fe,null),ve=!0,pe||(me=[I(K,"change",e[7]),I(A,"change",e[8]),I(W,"input",e[9]),I(W,"change",e[6]),I(le,"input",e[10]),I(le,"change",e[6]),I(ce,"input",e[11]),I(ce,"change",e[6])],pe=!0)},p(e,[a]){if(0&a){let t;for(ge=H(),t=0;t<ge.length;t+=1){const l=k(e,ge,t);Ee[t]?Ee[t].p(l,a):(Ee[t]=w(l),Ee[t].c(),Ee[t].m(K,null))}for(;t<Ee.length;t+=1)Ee[t].d(1);Ee.length=ge.length}if(1&a&&E(K,e[0]),0&a){let t;for(de=O(),t=0;t<de.length;t+=1){const l=U(e,de,t);ye[t]?ye[t].p(l,a):(ye[t]=B(l),ye[t].c(),ye[t].m(A,null))}for(;t<ye.length;t+=1)ye[t].d(1);ye.length=de.length}2&a&&E(A,e[1]),4&a&&b(W.value)!==e[2]&&d(W,e[2]),8&a&&b(le.value)!==e[3]&&d(le,e[3]),(!ve||8&a)&&g(ce,"max",e[3]),16&a&&b(ce.value)!==e[4]&&d(ce,e[4])},i(e){ve||(x(ue.$$.fragment,e),ve=!0)},o(e){M(ue.$$.fragment,e),ve=!1},d(e){e&&i(a),e&&i(t),e&&i(v),e&&i(P),e&&i(_),N(Ee,e),N(ye,e),T(ue),pe=!1,$(me)}}}function q(e,a,t){const{session:l,page:s}=D();let n=L("C"),r="Major",o=4,h=2,c=2;P(()=>{let e=localStorage.getItem(z);if(e){let a=JSON.parse(e),l=a.levels[a.levels.length-1];t(0,n=L(l.key)),t(1,r=l.tonality),t(2,o=l.phraseLength),t(3,h=l.notePoolSize),t(4,c=l.maxInterval)}});return[n,r,o,h,c,l,function(){c>h&&t(4,c=h),o<2&&t(2,o=2),h<2&&t(3,h=2),c<2&&t(4,c=2),Math.floor(o)!==o&&t(2,o=Math.floor(o)),Math.floor(h)!==h&&t(3,h=Math.floor(h)),Math.floor(c)!==c&&t(4,c=Math.floor(c))},function(){n=_(this),t(0,n)},function(){r=_(this),t(1,r)},function(){o=b(this.value),t(2,o)},function(){h=b(this.value),t(3,h)},function(){c=b(this.value),t(4,c)},()=>{let e=new C(n.enharmonicEquivalent(),r,o,h,c).playURL();R()?j(e):(l.set({redirect:e}),j("/settings"))}]}export default class extends e{constructor(e){super(),a(this,e,q,K,t,{})}}
